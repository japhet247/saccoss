{% extends "./includes/_layout.html.twig" %}

{% block title %} {{ title }} {% endblock %}


{% block main %}

    <header class="header bg-white b-b clearfix">
        <div class="row m-t-sm">
            <div class="col-sm-8 m-b-xs"> 
                <h5 style="font-weight:bold;">{{ title }}</h5>
            </div>
        </div>
    </header>
  <section class="scrollable wrapper w-f">
    <section class="panel panel-default" style="border: none;">
      <div class="col-sm-8" style="margin-left: 17%;">
        {{ message|raw }}
            <form class="form-horizontal" method="post" action="{{ (pos['pos_id']) ? site_url('en/pos/save/' ~ pos['pos_id']) : site_url('en/pos/save') }}" data-validate="parsley">
                <input type="hidden" name="" value="" />
                <section class="panel panel-default">
                    <header class="panel-heading"> {{ page_title }} <strong></strong> 
                    </header>
                    <div class="panel-body">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">POS Name</label>
                            <div class="col-sm-9">
                                <input type="text" name="pos_name"  class="form-control parsley-validated" value="{{ set_value('pos_name', pos['pos_name']) }}" data-required="true" placeholder="eg KINONDONI TERMINAL 1">
                                
                            </div>
                        </div>
                        <div class="line line-dashed b-b line-lg pull-in"></div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">POS IMEI</label>
                            <div class="col-sm-9">
                                <input type="text" name="device_imei"  class="form-control parsley-validated" value="{{ set_value('device_imei', pos['device_imei']) }}" data-required="true" placeholder="086780234568712">
                                
                            </div>
                        </div>
                        
                        <div class="line line-dashed b-b line-lg pull-in"></div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">POS Serial Number</label>
                            <div class="col-sm-9">
                                <input type="text" name="serial_no"  class="form-control parsley-validated" value="{{ set_value('serial_no', pos['serial_no']) }}" data-required="true" placeholder="Check on the Device">
                                
                            </div>
                        </div>
                        <div class="line line-dashed b-b line-lg pull-in"></div>
                        
                        <div class="form-group branch" >
                            <label class="col-sm-3 control-label">Municipal</label>
                            <div class="col-sm-9">
                              <select name="municipal_id" id="municipal"  style="width:100%" class="chosen-select form-control parsley-validated"  data-required="true">
                                <option value="">--Select One--</option>
                                {% for region, muns in municipals %}
                                    <optgroup label="{{ region }}">
                                        {% for m in muns %}
                                            <option value="{{ m['municipal_id'] }}" 
                                            {% if m['municipal_id'] == pos['municipal_id'] %}
                                            {{ set_select('municipal_id', m['municipal_id'], TRUE) }}
                                            {% else %}
                                            {{ set_select('municipal_id', m['municipal_id']) }}
                                            {% endif %}
                                            >{{ m['municipal_name'] }}</option>
                                        {% endfor %}
                                    </optgroup>
                                {% endfor %}
                              </select>
                            </div>
                          </div>
                        
                        <div class="line line-dashed b-b line-lg pull-in"></div>
                        <section class="scrollable">
                          {% for key, functions in properties %}
                            <div class="table-responsive border-fl" style="margin-bottom:10px;">
                            <table class="table table-striped m-b-none" id="normal_merchant_services">
                            <header class="panel-heading border-btm"> <strong>{{ lang(key)|title }}</strong> </header>
                              <thead>
                                <tr>
                                  <th width="20"><label class="checkbox m-n i-checks">
                                      <input type="checkbox" name="property">
                                      <i></i></label>
                                  </th>
                                  <th>Select All</th>
                                </tr>
                              </thead>
                              
                              <tbody>
                                
                                {% for function in functions %}
                                  <tr>
                                    <td><label class="checkbox m-n i-checks">
                                        <input type="checkbox" name="property_ids[]" 
                                        value="{{ function['property_id'] }}"
                                        {% if saved_functions %}
                                          {% for saved in saved_functions %}
                                            {% if function['property_id'] == saved['property_id'] %}
                                              {{ set_checkbox("property_ids", function['property_id'], TRUE)
                                              }}
                                            {% else %}
                                              {{ set_checkbox("property_ids", function['property_id'])
                                              }}
                                            {% endif %}
                                          {% endfor %}
                                        {% else %}
                                        {{ set_checkbox("property_ids", function['property_id'])
                                          }}
                                        {% endif %}
                                        />
                                        <i></i></label></td>  
                                    <td class = "service">{{ function['property_value']|title }}</td>   
                                  </tr>
                                {% endfor %} 
                              </tbody>
                              
                            </table>
                          </div>
                      {% endfor %}
                    </section>
                         
                    </div>
                    <footer class="panel-footer text-right bg-light lter">
                        <button type="submit" class="btn btn-primary btn-s-xs">Submit</button>
                    </footer>
                </section>
            </form>
        </div>
    </section>
</section>
{% endblock %}
